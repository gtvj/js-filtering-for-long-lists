{"version":3,"sources":["../src/filtering_long_lists.js"],"names":["TNALongLists","$","Dexie","$links","extract_data_from_html","$els","data_from_html","each","i","$this","text","url","attr","push","id","connect_to_or_set_up_database","data","db","version","stores","links_data","on","bulkAdd","then","lastKey","console","log","catch","BulkError","e","error","open","err","jQuery"],"mappings":";;AAAA;;AAEA,IAAIA,eAAgB,UAAUC,CAAV,EAAaC,KAAb,EAAoB;;AAEpC,QAAIC,SAASF,EAAE,OAAF,CAAb;;AAEA,QAAIG,yBAAyB,SAAzBA,sBAAyB,CAAUC,IAAV,EAAgB;;AAEzC,YAAIC,iBAAiB,EAArB;;AAEAD,aAAKE,IAAL,CAAU,UAAUC,CAAV,EAAa;AACnB,gBAAIC,QAAQR,EAAE,IAAF,CAAZ;AAAA,gBACIS,OAAOD,MAAMC,IAAN,EADX;AAAA,gBAEIC,MAAMF,MAAMG,IAAN,CAAW,MAAX,CAFV;;AAIAN,2BAAeO,IAAf,CAAoB,EAACC,IAAIN,CAAL,EAAQE,MAAMA,IAAd,EAAoBC,KAAKA,GAAzB,EAApB;AACH,SAND;;AAQA,eAAOL,cAAP;AACH,KAbD;;AAgBA,QAAIS,gCAAgC,SAAhCA,6BAAgC,CAAUC,IAAV,EAAgB;;AAEhD,YAAIC,KAAK,IAAIf,KAAJ,CAAU,gBAAV,CAAT;;AAEAe,WAAGC,OAAH,CAAW,CAAX,EAAcC,MAAd,CAAqB,EAACC,YAAY,aAAb,EAArB;;AAEAH,WAAGI,EAAH,CAAM,UAAN,EAAkB,YAAY;AAC1BJ,eAAGG,UAAH,CAAcE,OAAd,CAAsBN,IAAtB,EAA4BO,IAA5B,CAAiC,UAAUC,OAAV,EAAmB;AAChDC,2BAAWA,QAAQC,GAAR,CAAYF,UAAU,4BAAtB,CAAX;AACH,aAFD,EAEGG,KAFH,CAESzB,MAAM0B,SAFf,EAE0B,UAAUC,CAAV,EAAa;AACnCJ,2BAAWA,QAAQK,KAAR,CAAc,wCAAd,CAAX;AACH,aAJD;AAKH,SAND;;AAQAb,WAAGc,IAAH,GAAUR,IAAV,CAAe,UAAUN,EAAV,EAAc;AACzBQ,uBAAWA,QAAQC,GAAR,CAAY,8BAAZ,CAAX;AACH,SAFD,EAEGC,KAFH,CAES,UAAUK,GAAV,EAAe;AACpBP,uBAAWA,QAAQC,GAAR,CAAY,aAAaM,GAAzB,CAAX;AACH,SAJD;;AAMA,eAAOf,EAAP;AACH,KArBD;;AAuBA,QAAID,OAAOZ,uBAAuBD,MAAvB,CAAX;;AAEA,QAAIc,KAAKF,8BAA8BC,IAA9B,CAAT;;AAEA,WAAO;AACHb,gBAAQA,MADL;AAEHc,YAAIA;AAFD,KAAP;AAKH,CApDkB,CAoDhBgB,MApDgB,EAoDR/B,KApDQ,CAAnB","file":"filtering_long_lists.js","sourcesContent":["// Using Revealing Module Pattern\n\nvar TNALongLists = (function ($, Dexie) {\n\n    var $links = $('.az a');\n\n    var extract_data_from_html = function ($els) {\n\n        var data_from_html = [];\n\n        $els.each(function (i) {\n            var $this = $(this),\n                text = $this.text(),\n                url = $this.attr('href');\n\n            data_from_html.push({id: i, text: text, url: url});\n        });\n\n        return data_from_html;\n    };\n\n\n    var connect_to_or_set_up_database = function (data) {\n\n        var db = new Dexie(\"links_database\");\n\n        db.version(1).stores({links_data: 'id,text,url'});\n\n        db.on(\"populate\", function () {\n            db.links_data.bulkAdd(data).then(function (lastKey) {\n                console && console.log(lastKey + ' item(s) added to database');\n            }).catch(Dexie.BulkError, function (e) {\n                console && console.error(\"Some items were not added successfully\");\n            });\n        });\n\n        db.open().then(function (db) {\n            console && console.log(\"Database opened successfully\");\n        }).catch(function (err) {\n            console && console.log(\"Error : \" + err);\n        });\n\n        return db;\n    };\n\n    var data = extract_data_from_html($links);\n\n    var db = connect_to_or_set_up_database(data);\n\n    return {\n        $links: $links,\n        db: db\n    };\n\n})(jQuery, Dexie);\n\n"]}